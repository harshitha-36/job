{"ast":null,"code":"import{useContext,useState}from\"react\";import{Grid,TextField,Button,Typography,makeStyles,Paper}from\"@material-ui/core\";import axios from\"axios\";import{Redirect}from\"react-router-dom\";import PasswordInput from\"../lib/PasswordInput\";import EmailInput from\"../lib/EmailInput\";import{SetPopupContext}from\"../App\";import apiList from\"../lib/apiList\";import isAuth from\"../lib/isAuth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({body:{padding:\"60px 60px\"},inputBox:{width:\"300px\"},submitButton:{width:\"300px\"}}));const Login=props=>{const classes=useStyles();const setPopup=useContext(SetPopupContext);const[loggedin,setLoggedin]=useState(isAuth());const[loginDetails,setLoginDetails]=useState({email:\"\",password:\"\"});const[inputErrorHandler,setInputErrorHandler]=useState({email:{error:false,message:\"\"},password:{error:false,message:\"\"}});const handleInput=(key,value)=>{setLoginDetails({...loginDetails,[key]:value});};const handleInputError=(key,status,message)=>{setInputErrorHandler({...inputErrorHandler,[key]:{error:status,message:message}});};const handleLogin=()=>{const verified=!Object.keys(inputErrorHandler).some(obj=>{return inputErrorHandler[obj].error;});if(verified){axios.post(apiList.login,loginDetails).then(response=>{localStorage.setItem(\"token\",response.data.token);localStorage.setItem(\"type\",response.data.type);setLoggedin(isAuth());setPopup({open:true,severity:\"success\",message:\"Logged in successfully\"});console.log(response);}).catch(err=>{setPopup({open:true,severity:\"error\",message:err.response.data.message});console.log(err.response);});}else{setPopup({open:true,severity:\"error\",message:\"Incorrect Input\"});}};return loggedin?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(Paper,{elevation:3,className:classes.body,children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",spacing:4,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h2\",children:\"Login\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(EmailInput,{label:\"Email\",value:loginDetails.email,onChange:event=>handleInput(\"email\",event.target.value),inputErrorHandler:inputErrorHandler,handleInputError:handleInputError,className:classes.inputBox})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(PasswordInput,{label:\"Password\",value:loginDetails.password,onChange:event=>handleInput(\"password\",event.target.value),className:classes.inputBox})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>handleLogin(),className:classes.submitButton,children:\"Login\"})})]})});};export default Login;","map":{"version":3,"names":["useContext","useState","Grid","TextField","Button","Typography","makeStyles","Paper","axios","Redirect","PasswordInput","EmailInput","SetPopupContext","apiList","isAuth","jsx","_jsx","jsxs","_jsxs","useStyles","theme","body","padding","inputBox","width","submitButton","Login","props","classes","setPopup","loggedin","setLoggedin","loginDetails","setLoginDetails","email","password","inputErrorHandler","setInputErrorHandler","error","message","handleInput","key","value","handleInputError","status","handleLogin","verified","Object","keys","some","obj","post","login","then","response","localStorage","setItem","data","token","type","open","severity","console","log","catch","err","to","elevation","className","children","container","direction","spacing","alignItems","item","variant","component","label","onChange","event","target","color","onClick"],"sources":["C:/Users/Kambala Ramakrishna/OneDrive/Desktop/jobportal/frontend/src/component/Login.js"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport {\n  Grid,\n  TextField,\n  Button,\n  Typography,\n  makeStyles,\n  Paper,\n} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\n\nimport PasswordInput from \"../lib/PasswordInput\";\nimport EmailInput from \"../lib/EmailInput\";\nimport { SetPopupContext } from \"../App\";\n\nimport apiList from \"../lib/apiList\";\nimport isAuth from \"../lib/isAuth\";\n\nconst useStyles = makeStyles((theme) => ({\n  body: {\n    padding: \"60px 60px\",\n  },\n  inputBox: {\n    width: \"300px\",\n  },\n  submitButton: {\n    width: \"300px\",\n  },\n}));\n\nconst Login = (props) => {\n  const classes = useStyles();\n  const setPopup = useContext(SetPopupContext);\n\n  const [loggedin, setLoggedin] = useState(isAuth());\n\n  const [loginDetails, setLoginDetails] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const [inputErrorHandler, setInputErrorHandler] = useState({\n    email: {\n      error: false,\n      message: \"\",\n    },\n    password: {\n      error: false,\n      message: \"\",\n    },\n  });\n\n  const handleInput = (key, value) => {\n    setLoginDetails({\n      ...loginDetails,\n      [key]: value,\n    });\n  };\n\n  const handleInputError = (key, status, message) => {\n    setInputErrorHandler({\n      ...inputErrorHandler,\n      [key]: {\n        error: status,\n        message: message,\n      },\n    });\n  };\n\n  const handleLogin = () => {\n    const verified = !Object.keys(inputErrorHandler).some((obj) => {\n      return inputErrorHandler[obj].error;\n    });\n    if (verified) {\n      axios\n        .post(apiList.login, loginDetails)\n        .then((response) => {\n          localStorage.setItem(\"token\", response.data.token);\n          localStorage.setItem(\"type\", response.data.type);\n          setLoggedin(isAuth());\n          setPopup({\n            open: true,\n            severity: \"success\",\n            message: \"Logged in successfully\",\n          });\n          console.log(response);\n        })\n        .catch((err) => {\n          setPopup({\n            open: true,\n            severity: \"error\",\n            message: err.response.data.message,\n          });\n          console.log(err.response);\n        });\n    } else {\n      setPopup({\n        open: true,\n        severity: \"error\",\n        message: \"Incorrect Input\",\n      });\n    }\n  };\n\n  return loggedin ? (\n    <Redirect to=\"/\" />\n  ) : (\n    <Paper elevation={3} className={classes.body}>\n      <Grid container direction=\"column\" spacing={4} alignItems=\"center\">\n        <Grid item>\n          <Typography variant=\"h3\" component=\"h2\">\n            Login\n          </Typography>\n        </Grid>\n        <Grid item>\n          <EmailInput\n            label=\"Email\"\n            value={loginDetails.email}\n            onChange={(event) => handleInput(\"email\", event.target.value)}\n            inputErrorHandler={inputErrorHandler}\n            handleInputError={handleInputError}\n            className={classes.inputBox}\n          />\n        </Grid>\n        <Grid item>\n          <PasswordInput\n            label=\"Password\"\n            value={loginDetails.password}\n            onChange={(event) => handleInput(\"password\", event.target.value)}\n            className={classes.inputBox}\n          />\n        </Grid>\n        <Grid item>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => handleLogin()}\n            className={classes.submitButton}\n          >\n            Login\n          </Button>\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}