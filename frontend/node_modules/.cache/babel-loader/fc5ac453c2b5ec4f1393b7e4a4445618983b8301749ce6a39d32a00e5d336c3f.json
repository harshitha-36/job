{"ast":null,"code":"import{useState,useContext}from\"react\";import{Grid,Button,TextField,LinearProgress}from\"@material-ui/core\";import{CloudUpload}from\"@material-ui/icons\";import Axios from\"axios\";import{SetPopupContext}from\"../App\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const FileUploadInput=props=>{const setPopup=useContext(SetPopupContext);const{uploadTo,identifier,handleInput}=props;const[file,setFile]=useState(\"\");const[uploadPercentage,setUploadPercentage]=useState(0);const handleUpload=()=>{console.log(file);const data=new FormData();data.append(\"file\",file);Axios.post(uploadTo,data,{headers:{\"Content-Type\":\"multipart/form-data\"},onUploadProgress:progressEvent=>{setUploadPercentage(parseInt(Math.round(progressEvent.loaded*100/progressEvent.total)));}}).then(response=>{console.log(response.data);handleInput(identifier,response.data.url);setPopup({open:true,severity:\"success\",message:response.data.message});}).catch(err=>{console.log(err.response);setPopup({open:true,severity:\"error\",message:err.response.statusText//   message: err.response.data\n//     ? err.response.data.message\n//     : err.response.statusText,\n});});};return/*#__PURE__*/_jsxs(Grid,{container:true,item:true,xs:12,direction:\"column\",className:props.className,children:[/*#__PURE__*/_jsxs(Grid,{container:true,item:true,xs:12,spacing:0,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:3,children:/*#__PURE__*/_jsxs(Button,{variant:\"contained\",color:\"primary\",component:\"label\",style:{width:\"100%\",height:\"100%\"},children:[props.icon,/*#__PURE__*/_jsx(\"input\",{type:\"file\",style:{display:\"none\"},onChange:event=>{console.log(event.target.files);setUploadPercentage(0);setFile(event.target.files[0]);}// onChange={onChange}\n// onChange={\n//   (e) => {}\n//   //   setSource({ ...source, place_img: e.target.files[0] })\n// }\n})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{label:props.label,value:file?file.name||\"\":\"\",InputProps:{readOnly:true},variant:\"outlined\",style:{width:\"100%\"}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:3,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",style:{width:\"100%\",height:\"100%\"},onClick:()=>handleUpload(),disabled:file?false:true,children:/*#__PURE__*/_jsx(CloudUpload,{})})})]}),uploadPercentage!==0?/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{marginTop:\"10px\"},children:/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:uploadPercentage})}):null]});};export default FileUploadInput;","map":{"version":3,"names":["useState","useContext","Grid","Button","TextField","LinearProgress","CloudUpload","Axios","SetPopupContext","jsx","_jsx","jsxs","_jsxs","FileUploadInput","props","setPopup","uploadTo","identifier","handleInput","file","setFile","uploadPercentage","setUploadPercentage","handleUpload","console","log","data","FormData","append","post","headers","onUploadProgress","progressEvent","parseInt","Math","round","loaded","total","then","response","url","open","severity","message","catch","err","statusText","container","item","xs","direction","className","children","spacing","variant","color","component","style","width","height","icon","type","display","onChange","event","target","files","label","value","name","InputProps","readOnly","onClick","disabled","marginTop"],"sources":["C:/Users/Kambala Ramakrishna/OneDrive/Desktop/jobportal/frontend/src/lib/FileUploadInput.js"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport { Grid, Button, TextField, LinearProgress } from \"@material-ui/core\";\nimport { CloudUpload } from \"@material-ui/icons\";\nimport Axios from \"axios\";\n\nimport { SetPopupContext } from \"../App\";\n\nconst FileUploadInput = (props) => {\n  const setPopup = useContext(SetPopupContext);\n\n  const { uploadTo, identifier, handleInput } = props;\n\n  const [file, setFile] = useState(\"\");\n  const [uploadPercentage, setUploadPercentage] = useState(0);\n\n  const handleUpload = () => {\n    console.log(file);\n    const data = new FormData();\n    data.append(\"file\", file);\n    Axios.post(uploadTo, data, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n      onUploadProgress: (progressEvent) => {\n        setUploadPercentage(\n          parseInt(\n            Math.round((progressEvent.loaded * 100) / progressEvent.total)\n          )\n        );\n      },\n    })\n      .then((response) => {\n        console.log(response.data);\n        handleInput(identifier, response.data.url);\n        setPopup({\n          open: true,\n          severity: \"success\",\n          message: response.data.message,\n        });\n      })\n      .catch((err) => {\n        console.log(err.response);\n        setPopup({\n          open: true,\n          severity: \"error\",\n          message: err.response.statusText,\n          //   message: err.response.data\n          //     ? err.response.data.message\n          //     : err.response.statusText,\n        });\n      });\n  };\n\n  return (\n    <Grid container item xs={12} direction=\"column\" className={props.className}>\n      <Grid container item xs={12} spacing={0}>\n        <Grid item xs={3}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            component=\"label\"\n            style={{ width: \"100%\", height: \"100%\" }}\n          >\n            {props.icon}\n            <input\n              type=\"file\"\n              style={{ display: \"none\" }}\n              onChange={(event) => {\n                console.log(event.target.files);\n                setUploadPercentage(0);\n                setFile(event.target.files[0]);\n              }}\n              // onChange={onChange}\n              // onChange={\n              //   (e) => {}\n              //   //   setSource({ ...source, place_img: e.target.files[0] })\n              // }\n            />\n          </Button>\n        </Grid>\n        <Grid item xs={6}>\n          <TextField\n            label={props.label}\n            value={file ? file.name || \"\" : \"\"}\n            InputProps={{\n              readOnly: true,\n            }}\n            variant=\"outlined\"\n            style={{ width: \"100%\" }}\n          />\n        </Grid>\n        <Grid item xs={3}>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            style={{ width: \"100%\", height: \"100%\" }}\n            onClick={() => handleUpload()}\n            disabled={file ? false : true}\n          >\n            <CloudUpload />\n          </Button>\n        </Grid>\n      </Grid>\n      {uploadPercentage !== 0 ? (\n        <Grid item xs={12} style={{ marginTop: \"10px\" }}>\n          <LinearProgress variant=\"determinate\" value={uploadPercentage} />\n        </Grid>\n      ) : null}\n    </Grid>\n  );\n};\n\nexport default FileUploadInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}